<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Happy Birthday, My Love ‚ù§Ô∏è</title>
  <meta name="description" content="A romantic, responsive birthday surprise with animations for Rofaida." />
  <style>
    :root {
      --bg1: #fff1f7;
      --bg2: #ffe8f2;
      --accent: #ff6b9f;
      --accent-dark: #ff417f;
      --text: #3a1f2e;
      --card: rgba(255, 255, 255, 0.65);
      --shadow: 0 12px 40px rgba(0,0,0,0.15);
    }

    /* Base layout */
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: "Poppins", system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji";
      color: var(--text);
      background: radial-gradient(1200px 800px at 10% 10%, var(--bg1), transparent),
                  radial-gradient(1200px 800px at 90% 90%, var(--bg2), transparent),
                  linear-gradient(135deg, #fff5fb 0%, #ffeef7 50%, #fff8fb 100%);
      overflow-x: hidden;
      display: grid;
      place-items: center;
      padding: clamp(16px, 3vw, 32px);
    }

    .wrap {
      width: min(900px, 100%);
      text-align: center;
      position: relative;
    }

    /* Title */
    h1 {
      margin: 0 0 14px;
      font-size: clamp(1.8rem, 4.5vw, 3rem);
      letter-spacing: 0.5px;
      color: #d63384;
      text-shadow: 0 2px 10px rgba(214, 51, 132, 0.15);
      animation: fadeIn 1.2s ease both;
    }
    .subtitle {
      margin: 0 0 22px;
      font-size: clamp(0.95rem, 2.4vw, 1.1rem);
      opacity: 0.8;
      animation: fadeInUp 1.2s 0.1s ease both;
    }

    /* Card */
    .card {
      margin: 0 auto;
      background: var(--card);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      border-radius: 22px;
      box-shadow: var(--shadow);
      padding: clamp(16px, 4vw, 30px);
      border: 1px solid rgba(255,255,255,0.6);
      animation: pop 0.6s ease both;
    }

    .actions { margin-top: 16px; display: flex; flex-wrap: wrap; gap: 12px; justify-content: center; }

    button {
      appearance: none;
      border: 0;
      padding: 12px 20px;
      border-radius: 999px;
      background: linear-gradient(135deg, var(--accent), var(--accent-dark));
      color: #fff;
      font-weight: 600;
      letter-spacing: 0.2px;
      cursor: pointer;
      box-shadow: 0 8px 18px rgba(255, 65, 127, 0.25);
      transition: transform .2s ease, filter .2s ease;
    }
    button:hover { transform: translateY(-2px); filter: brightness(1.02); }
    button:active { transform: translateY(0); }

    /* Message area */
    #message {
      margin-top: 16px;
      text-align: left;
      font-size: clamp(1rem, 2.6vw, 1.15rem);
      line-height: 1.9;
      white-space: pre-wrap;
      opacity: 0; transform: translateY(8px);
      transition: opacity .8s ease, transform .8s ease;
    }

    .typing { border-right: 2px solid #d6336c; display: inline-block; animation: caret 1s steps(1) infinite; }
    @keyframes caret { 50% { border-color: transparent; } }

    .hearts, .confetti { position: fixed; inset: 0; pointer-events: none; z-index: -1; }

    /* Footer note */
    .note { margin-top: 14px; font-size: 0.9rem; opacity: 0.7; }

    /* Animations */
    @keyframes fadeIn { from {opacity: 0} to {opacity: 1} }
    @keyframes fadeInUp { from {opacity: 0; transform: translateY(8px)} to {opacity: 1; transform: translateY(0)} }
    @keyframes pop { from { transform: translateY(8px) scale(.98); opacity:.8 } to { transform:none; opacity:1 } }

    /* Reduce motion preference */
    @media (prefers-reduced-motion: reduce) {
      * { animation: none !important; transition: none !important; }
    }
  </style>
</head>
<body>
  <!-- Background layers -->
  <canvas id="confetti" class="confetti" aria-hidden="true"></canvas>
  <canvas id="hearts" class="hearts" aria-hidden="true"></canvas>

  <main class="wrap">
    <h1>üéÇ Happy Birthday, My Love üéÇ</h1>
    <p class="subtitle">A tiny website, for a heart bigger than the sky ‚ú®</p>

    <section class="card" aria-live="polite">
      <div class="actions">
        <button id="revealBtn">Open Your Birthday Surprise üíå</button>
        <button id="musicBtn" title="Play soft music" aria-label="Play music">üé∂ Play Music</button>
      </div>

      <div id="message" role="region" aria-label="Love message">
        <span id="typed" class="typing"></span>
      </div>

      <!-- Optional audio: replace music.mp3 with your own file name in the same folder -->
      <audio id="audio" preload="none">
        <source src="music.mp3" type="audio/mpeg" />
      </audio>
    </section>
  </main>

  <script>
    // ====== Creative message ======
    const loveMessage = `ROFAIDA, MY DEAR ROFAIDA ‚ù§Ô∏è\n\n` +
`If the sky kept a diary, it would write about your smile.\n` +
`If mornings had a favorite song, it would be your laugh.\n\n` +
`You are a wonderful person ‚Äî the gentle spark that lights my days,\n` +
`the calm harbor for my heart, the nour of my life.\n` +
`With you, the ordinary turns magical and every road feels like home.\n\n` +
`I am always proud of you ‚Äî of your courage, your kindness,\n` +
`and the way you turn dreams into plans and plans into reality.\n` +
`I deeply love you, in the quiet moments and the loud ones,\n` +
`in the sunshine and the rain ‚Äî in every heartbeat.\n\n` +
`With me, you will always receive the love and the treatment you deserve‚Ä¶\n` +
`and even more, for as long as I breathe.\n\n` +
`I can‚Äôt wait to celebrate your birthday with you ‚Äî\n` +
`to hold your hand, count wishes with you, and make this day glow.\n\n` +
`Happy Birthday, my love. Today, and always, you are the nour of my life. ‚ú®`;

    const revealBtn = document.getElementById('revealBtn');
    const typed = document.getElementById('typed');
    const messageBox = document.getElementById('message');
    const audio = document.getElementById('audio');
    const musicBtn = document.getElementById('musicBtn');

    let revealed = false;

    revealBtn.addEventListener('click', async () => {
      if (revealed) return;
      revealed = true;
      messageBox.style.opacity = '1';
      messageBox.style.transform = 'translateY(0)';
      typeOut(loveMessage, typed, 18, 40); // min & max typing speed (ms)
      // try to start music on first user gesture (will play only if a file exists)
      try { await audio.play(); musicBtn.textContent = '‚è∏Ô∏è Pause Music'; } catch (e) { /* ignored */ }
    });

    musicBtn.addEventListener('click', async () => {
      if (audio.paused) { try { await audio.play(); musicBtn.textContent = '‚è∏Ô∏è Pause Music'; } catch(e){} }
      else { audio.pause(); musicBtn.textContent = 'üé∂ Play Music'; }
    });

    function typeOut(str, el, min=15, max=35) {
      el.textContent = '';
      let i = 0;
      (function tick(){
        if (i <= str.length) {
          el.textContent = str.slice(0, i);
          i++;
          const jitter = Math.random() * (max - min) + min;
          setTimeout(tick, jitter);
        } else {
          el.classList.remove('typing');
        }
      })();
    }

    // ====== Floating hearts background (canvas) ======
    const heartsCanvas = document.getElementById('hearts');
    const hctx = heartsCanvas.getContext('2d');
    const confettiCanvas = document.getElementById('confetti');
    const cctx = confettiCanvas.getContext('2d');

    function resize() {
      heartsCanvas.width = confettiCanvas.width = window.innerWidth;
      heartsCanvas.height = confettiCanvas.height = window.innerHeight;
    }
    resize();
    window.addEventListener('resize', resize);

    // Hearts particles
    const hearts = Array.from({length: 30}, () => makeHeart());
    function makeHeart() {
      return {
        x: Math.random() * heartsCanvas.width,
        y: heartsCanvas.height + Math.random() * heartsCanvas.height,
        size: 10 + Math.random() * 18,
        speed: 0.4 + Math.random() * 0.8,
        drift: -0.3 + Math.random() * 0.6,
        alpha: 0.5 + Math.random() * 0.5
      };
    }

    function drawHeart(x, y, size, alpha) {
      hctx.save();
      hctx.translate(x, y);
      hctx.rotate(Math.PI / 4);
      hctx.globalAlpha = alpha;
      hctx.fillStyle = '#ff6b9f';
      const s = size;
      hctx.fillRect(0, 0, s, s);
      // circles to make the heart shape
      hctx.beginPath();
      hctx.arc(0, s/2, s/2, Math.PI/2, Math.PI*1.5);
      hctx.arc(s/2, 0, s/2, Math.PI, Math.PI*2);
      hctx.closePath();
      hctx.fill();
      hctx.restore();
    }

    // Confetti particles
    const confetti = Array.from({length: 80}, () => makeConfetti());
    function makeConfetti() {
      const colors = ['#ffd1e1','#ffc2dd','#ffe4ef','#ffffff'];
      return {
        x: Math.random() * confettiCanvas.width,
        y: -Math.random() * confettiCanvas.height,
        size: 3 + Math.random() * 5,
        speed: 0.6 + Math.random() * 1.2,
        rot: Math.random() * Math.PI,
        rotSpeed: -0.03 + Math.random() * 0.06,
        color: colors[Math.floor(Math.random()*colors.length)],
        drift: -0.4 + Math.random() * 0.8
      };
    }

    function loop() {
      // hearts
      hctx.clearRect(0,0,heartsCanvas.width, heartsCanvas.height);
      for (const p of hearts) {
        p.y -= p.speed;
        p.x += p.drift;
        if (p.y < -40 || p.x < -40 || p.x > heartsCanvas.width + 40) {
          Object.assign(p, makeHeart(), { y: heartsCanvas.height + 20 });
        }
        drawHeart(p.x, p.y, p.size, p.alpha);
      }

      // confetti
      cctx.clearRect(0,0,confettiCanvas.width, confettiCanvas.height);
      for (const f of confetti) {
        f.y += f.speed;
        f.x += f.drift;
        f.rot += f.rotSpeed;
        if (f.y > confettiCanvas.height + 10) Object.assign(f, makeConfetti(), { y: -20 });
        cctx.save();
        cctx.translate(f.x, f.y);
        cctx.rotate(f.rot);
        cctx.fillStyle = f.color;
        cctx.fillRect(-f.size/2, -f.size/2, f.size, f.size);
        cctx.restore();
      }

      requestAnimationFrame(loop);
    }
    loop();
  </script>
</body>
</html>
